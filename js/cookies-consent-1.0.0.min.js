var CookiesConsent=function(){"use strict";function e(){try{return self.crypto.randomUUID()}catch(e){console.log("Erro ao obter o UUID. Valor padrão será retornado.")}return"acadd8a1-7a96-4602-bffa-7f938f17555a"}function t(e,t){try{var o=new Date;o.setTime(o.getTime()+31536e6);var a="expires="+o.toUTCString();document.cookie=e+"="+t+";"+a+";Path=/;SameSite=Strict;Secure;"}catch(e){d(e)}}var o,a,n,i=e(),c=CookiesMonitor.getLgpdCookie(),r=!1,s={DESEMPENHO:"#performance",FUNCIONAL:"#functional",PUBLICIDADE_MARKETING:"#publicity"},d=function(e){console.log(e),window.dataLayer.push({event:"gaEventErrors",eventCategory:"cookies-consent",eventAction:"error",eventLabel:e.toString()})};if("geolocation"in navigator)try{navigator.geolocation.getCurrentPosition(function(e){o={latitude:e.coords.latitude,longitude:e.coords.longitude}})}catch(e){d(e)}var u=function(e){try{n=e||{data:{}},CookiesMonitor.includeScript({src:n.basePathAssetsJS+"/browser-detect-1.0.0.min.js",callback:l})}catch(e){d(e)}},l=function(){try{if(a=browserDetect(),document.querySelectorAll(".js-save-cookies").forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),p()})}),document.querySelectorAll(".js-accept-cookies--all").forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),p("ACEITO")})}),document.querySelectorAll(".js-refuse-cookies--all").forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),p("REJEITADO")})}),h("CookiesConsentReady"),!CookiesMonitor.getCookie("lgpd-cookie")){h("CookiesConsentShow");var e=document.querySelector(".aviso-cookies");e&&(e.style.display="flex")}}catch(e){d(e)}},f=function(s){try{r=!0;var u=e();s=s||{},s.navegador=s.navegador||n.data.navegador||a.name||"Não identificado",s.sistemaOperacional=s.sistemaOperacional||n.data.sistemaOperacional||a.os||"Não identificado",s.dispositivo=s.dispositivo||n.data.dispositivo||"Não identificado",s.siteConsentimento=s.siteConsentimento||n.data.siteConsentimento,o&&(s.latitude=s.latitude||n.data.latitude||o.latitude,s.longitude=s.longitude||n.data.longitude||o.longitude),s.lembreMe=s.lembreMe||n.data.lembreMe,s.agencia=s.agencia||n.data.agencia,s.conta=s.conta||n.data.conta,s.documento=s.documento||n.data.documento;var l=new XMLHttpRequest;l.open("POST",n.cookiesConsentDomainAPI+"/suporte-negocio/gerenciamento-ti/gerenciamento-lgpd/v1/consentimentos-cookies",!0),l.setRequestHeader("Safra-Correlation-ID",u),l.setRequestHeader("Safra-Aplicacao","PIS"),l.setRequestHeader("amc-session-id",i),l.setRequestHeader("amc-aplicacao","PIS"),l.setRequestHeader("amc-message-id",u),l.setRequestHeader("accept-language","pt-br"),l.setRequestHeader("Content-Type","application/json; charset=utf-8"),l.send(JSON.stringify(s)),l.addEventListener("readystatechange",function(){if(4===this.readyState)if(this.status>=200&&this.status<=299){var e=1;try{e=l.getResponseHeader("Location")}catch(e){console.log(e)}t("cookieAceitoID",e),t("lgpd-cookie",JSON.stringify(c)),window.dataLayer&&window.dataLayer.push({event:"updateConsentState"}),CookiesMonitor.update(),h("CookiesConsentAfterSend");var o=document.querySelector(".aviso-cookies");o&&(o.style.display="none"),setTimeout(function(){r=!1},1e3)}else g(this.responseText)}),l.addEventListener("error",g,!1),l.addEventListener("timeout",g,!1)}catch(e){d(e)}},g=function(e){try{r=!1,console.log("Ocorreu erro ao realizar o gerenciamento de cookie: "+e)}catch(e){d(e)}},m=function(e,t){try{"ACEITO"===t?e.parentElement.classList.add("checkbox-bg-filled"):e.parentElement.classList.remove("checkbox-bg-filled"),e.checked="ACEITO"===t?1:0}catch(e){d(e)}},p=function(e){try{if(r)return!1;c.detalhes.forEach(function(t){"ESSENCIAL"!==t.categoria&&(t.status=e||(document.querySelector("#cookies-management "+s[t.categoria]).checked?"ACEITO":"REJEITADO"))}),f({detalhes:c.detalhes})}catch(e){d(e)}},v=function(){try{c.detalhes.forEach(function(e){"ESSENCIAL"!==e.categoria&&m(document.querySelector("#cookies-management "+s[e.categoria]),e.status)});var e=document.querySelector("#modal-cookies");e&&e.classList.add("loaded")}catch(e){d(e)}},h=function(e){try{var t=new Event(e);document.dispatchEvent(t)}catch(e){d(e)}};return{init:u,cookiesManagement:v,acceptOrRefuseCookies:p}}();
